/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the java Plugin to add support for Java.
    id 'java'
    id 'maven-publish'
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
    mavenLocal()
}

dependencies {
    constraints {
        // Define dependency versions as constraints
        implementation 'org.apache.commons:commons-text:1.9'
    }

    // Use JUnit Jupiter for testing.
    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.1'
}

tasks.named('test') {
    // Use JUnit Platform for unit tests.
    useJUnitPlatform()
}

allprojects { Project project ->
    group = 'com.segbaus'
    version = '0.0.3-SNAPSHOT'

    println("name: ${project.name}")

    publishing {
        repositories {
            maven {
                url = "https://s01.oss.sonatype.org/content/repositories/snapshots/"
                authentication {
                    basic(BasicAuthentication)
                }
                credentials(PasswordCredentials)
            }
        }

        publications {
            maven(MavenPublication) {
                groupId = group
                artifactId = project.name
                version = version

                pom {
                    name = 'Project Reactor Test Runner'
                    description = 'Run tests concurrently using project reactor'
                    url = 'https://github.com/segevmalool/project-reactor-test-runner'

                    licenses {
                        license {
                            name='MIT License'
                            url='https://www.mit.edu/~amini/LICENSE.md'
                        }
                    }

                    developers {
                        developer {
                            id = 'segevmalool'
                            name = 'Segev Malool'
                            email = 'segevmalool@berkeley.edu'
                        }
                    }
                }

                from components.java
            }
        }
    }
}
